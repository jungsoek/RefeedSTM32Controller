# 2. 전체 시스템 아키텍처 설계

## 2.1 기계 시스템 구조 개요

본 시스템은 음식점·급식소 등에서 배출되는 폐식용유를 **안전하게 수거·보관·전처리**하기 위해 고안된 **일체형 이동식 장비**로, 전체 구조는 크게 **프레임/외장**, **탱크 시스템**, **여과·가열 모듈**, **펌핑 모듈**, **전기·제어부**, **이동 플랫폼**으로 구성된다. 냉장고 형태의 타워형 구조를 기반으로 내부에 모듈을 수직 배치하여 좁은 공간에서도 설치 및 이동이 가능하도록 설계되었다.

------

### **1) 프레임 및 외장 구조**

- **SUS304 또는 분체도장 스틸 프레임**을 사용하여 기계 강도와 내식성을 확보.
- 냉장고형 탑로드(Top-Load) 또는 프런트도어(Front-Load) 방식 중 선택.
- 외부 패널은 기름 오염 방지 및 청소 편의를 위한 **평면 구조 + 코팅 처리**.
- 유지보수 접근을 고려해 **전면·측면 패널 분리 가능** 구조.

------

### **2) 내부 탱크 시스템**

- **원유 수거 탱크(30–50 L)**
  - 음식점에서 받은 폐식용유를 저장하는 1차 탱크.
  - 점도 높은 기름을 대비해 **원뿔형 바닥(Slope bottom)** 설계.
- **전처리/여과 탱크(20–40 L)**
  - 가열·침전·1차 여과가 이루어지는 공간.
  - 내부에 온도센서, 레벨센서, 히터 구조 포함.
- **스테인리스(SUS304) 또는 알루미늄 합금**을 사용한 내열·내오염 구조.

------

### **3) 여과 및 가열 모듈**

- 폐식용유 내 **부유물, 고형물, 물기** 제거를 위한 다단 구조:
  - **세라믹 또는 메쉬 필터(50–200 μm)**
  - **침전 챔버**
  - 필요 시 **회전식 스크린 필터(옵션)**
- 점도 안정화를 위해:
  - **실리콘 오일 히터 패드** 또는 **내부 스테인리스 발열판** 사용
  - 설정 온도: **40–60°C** 유지
- 탱크 손상을 방지하기 위한 **과열 차단 온도 80°C** 설정.

------

### **4) 펌핑 및 배관 모듈**

- 내열 오일용 **기어펌프 또는 다이어프램 펌프** 사용(Bi-direction 가능).
- 배관은 **내유성 실리콘/불소 수지 튜브** 사용.
- 모듈 구성:
  - **수거 → 전처리 탱크 이송 라인**
  - **전처리 완료 → 배출/저장 용기로 이송 라인**
- 체크밸브 및 역류 방지 구조 포함.

------

### **5) 제어·센서 모듈**

- 단열된 제어함 내부에 배치:
  - 레벨센서(초음파식 / 부압식)
  - 온도센서(PT100/NTC)
  - 펌프 제어 릴레이
  - 히터 SSR
- HMI(스위치 패널 or 5" LCD)로 작동 상태 표시:
  - 온도
  - 유량/레벨
  - 필터 막힘 알람
- 전기 장치는 IPX2~X3 수준의 방오 구조.

------

### **6) 이동 플랫폼 구조**

- 전체 하중(필요 시 120 kg까지)을 지탱할 수 있는 **하부 샤시 일체형 프레임**.
- 이동은 다음 조합으로 구성:
  - 전면 **360° 회전 캐스터 2개**
  - 후면 **브레이크 포함 고정 캐스터 2개**
- 장비 이동 시 무게 중심 편차를 줄이기 위해 **무거운 탱크/펌프를 하부에 배치**.
- 캐스터는 **기름 오염에도 견디는 우레탄/고무 타입** 사용.

------

### **7) 유지보수 및 안전 설계**

- **전면 도어 개폐형**으로 내부 모듈 교체·세척 용이.
- 내부 오일이 외부로 누출되지 않도록 **이중 씰링 구조** 채택.
- 히터 및 펌프는 **온도/레벨 조건 기반 자동 차단 로직** 적용.
- 기구 설계 시 **내부 핫존과 사용자 접근 공간을 물리적으로 분리**.

## 2.2 전기·전자 시스템 구조

본 시스템의 전기·전자 구조는 **전원 관리부**, **센서 모듈**, **구동기(펌프·히터) 제어부**, **HMI/통신부**, **안전 회로**, **배선/인터페이스 구성**의 다섯 가지 핵심 서브시스템으로 구성된다.
 장비 크기와 사용 환경을 고려하여 **IoT/임베디드 기반의 소형 제어보드(ESP32·STM32)**를 중심으로 모듈화된 구조를 사용한다.

------

## **1) 전원 관리부 (Power Management Unit)**

### **입력 전원**

- AC 220V 단상(일반 상업용 콘센트)
- 누전차단기 및 퓨즈 내장 (Max 10A)

### **전원 변환 구조**

- AC 220V → DC 24V SMPS (히터·펌프 주전원)
- DC 24V → DC 12V/5V Step-down Buck Converter
  - 12V: 보조 모터, 쿨링팬
  - 5V: MCU, 센서, LCD, 통신 모듈

### **전원 안정화**

- DC 24V 라인에 Smoothing Capacitor (≥470 µF)
- 전자파 간섭(EMI) 대비 LC 필터
- 마이컴 보조 전원용 Super Capacitor 선택 가능

------

## **2) 센서 계측 시스템 (Sensor Module)**

### **탱크 레벨 센서**

- 초음파식 또는 **정전용량식 레벨센서**
  - 탱크 상부 설치
  - 0~30 cm 측정 범위

### **온도 센서**

- PT100 RTD 또는 NTC10K
- 가열 탱크 내부 벽면에 삽입형 구조
- MCU ADC 입력으로 실시간 모니터링

### **유량 센서(옵션)**

- 소형 오일용 터빈 유량계
- 폐유 점도가 높을 경우 유량 센서 대신 **펌프 RPM 기반 계산 방식** 적용 가능

### **필터 막힘 검출 센서**

- Differential Pressure Sensor (ΔP)
  - 전처리 탱크 필터 전·후단에 설치
  - 막힘 시 압력차 증가 → 경고

### **문 개폐 센서**

- 전면 도어/측면 패널에 마그네틱 리드 스위치
  - 유지보수 중 구동부 정지

------

## **3) 구동기 제어 시스템 (Actuator Control)**

### **히터 제어**

- DC 24V 히터 사용하는 경우:
   → Solid State Relay(SSR) 또는 MOSFET 드라이버 제어
- 히터 출력: 150~300 W (40–60°C 유지)
- 제어 방식:
  - PID 또는 단순 ON/OFF 서보 제어
  - 과열 보호(80°C) 자동 차단

### **펌프 제어**

- 기어 펌프 / 다이어프램 펌프
  - 24V 동작
  - 펌프 드라이버 모듈(H-Bridge or MOSFET)
- Flow Time Control 및 압력센서 기반 Shutoff 지원

### **쿨링 팬 / 환기 모듈**

- 전해질·증기 발생 최소화를 위한 **DC 12V 팬 제어**

### **도어 락 제어(옵션)**

- A 인가 시 자동 잠금, 유지보수 모드에서만 Unlock

------

## **4) 제어·연산·통신 모듈 (Controller & Communication)**

### **MCU / Main Controller**

- STM32F103 또는 ESP32-S3 기반
- 필요한 I/O 수:
  - 디지털: 펌프, 히터, 도어락 제어 6~8개
  - 아날로그: 온도, 압력·센서 입력 4~6개
  - UART/I2C: LCD·통신 모듈

### **HMI**

- 2가지 중 선택:
  - **5-inch TFT LCD + Capacitive Touch**
  - **Button + 2-line OLED Display(저가형)**
- 표시 항목:
  - 레벨
  - 온도
  - 펌프 상태
  - 필터 막힘 알람
  - 히터 작동 여부

### **통신 옵션**

- Wi-Fi (ESP32) 또는 UART → 외부 게이트웨이 연결
- BLE 통해 스마트폰 진단(정비 모드 only)
- 내부 로그 저장용 SD카드 지원

------

## **5) 안전 회로 (Safety System)**

### **기본 안전 회로**

- AC 입력부 누전차단기(ELB)
- 과전류 퓨즈
- 제어부 바이패스 스위치

### **온도 안전**

- 히터에 **Thermal Fuse (85~90°C)** 장착
- 온도센서 데이터 이상 시 즉시 차단

### **레벨 안전**

- 탱크 만수(Level High) 시 펌프 자동 정지
- 탱크 저수(Level Low) 시 히터 차단

### **문 개폐 안전**

- 도어 열림 감지 시:
  - 펌프, 히터, 팬 모두 즉시 OFF

### **배터리 사용 시(선택)**

- 24V 리튬팩 사용 시:
  - BMS 내장
  - 역전류 차단 MOSFET
  - 과전압·저전압 보호

------

## **6) 배선·인터페이스 구성**

### **내부 배선 구조**

- 고온·기름 환경을 고려한 **내유성 실리콘 케이블 사용**
- 강전(24V/히터) / 약전(MCU/센서) 라인 분리
- 노이즈 방지를 위해 Shielded Cable 사용(센서부)

### **커넥터 구조**

- 유지보수성 향상을 위해 모듈식 설계:
  - 히터 단자: Faston
  - 센서 라인: JST-XH
  - 펌프 라인: XT30/XT60

### **PCB/컨트롤러 배치**

- 제어보드는 **상부 전기실**에 밀폐 구조로 설치
- 배선은 케이블 덕트 통해 좌→우→후면 순환

## 2.3 유압/펌프/배관 시스템 개요

본 시스템의 유압/펌프/배관 구조는 **폐식용유를 수거 → 전처리 탱크로 이동 → 여과 → 저장/배출**의 전체 공정을 구현하기 위해 설계된 소형 폐유 이송 시스템이다.
 기계 크기(냉장고급)에 맞춰 모든 유체 라인은 **저압·저유량 중심**으로 구성하며, 점도 변화(온도 20~60°C)에 대응할 수 있도록 펌프·배관 재질을 최적화하였다.

구성 요소는 **1) 흡입부**, **2) 이송 펌프부**, **3) 배관부**, **4) 밸브 및 체크밸브**, **5) 필터링 인터페이스**, **6) 배출부**로 나뉜다.

------

### **1) 흡입부 (Intake System)**

#### **흡입 방식**

- 음식점에서 넘겨받은 **폐식용유 컨테이너에서 직접 호스로 흡입**
   또는
- 기계 자체의 **이물질 받이/깔때기형 투입구**로 투입

#### **흡입 호스 재질**

- 내유성 불소수지(FEP/PTFE) 또는 고내열 실리콘
- 내경 10~16 mm
- 길이 1.0~1.5m
- 기름 + 찌꺼기 혼입을 고려해 **절곡 최소화 구조**

#### **흡입 필터(Pre-Strainer)**

- 호스 끝단에 원통형 **메쉬 0.5~1 mm 스트레이너** 장착
   → 대형 고형물 유입 방지
- 분리형 구조로 세척이 쉽게 설계

------

### **2) 펌프부 (Pump System)**

폐식용유(WCO)는 점도가 높고 온도에 민감하므로 **기어펌프** 또는 **다이어프램 펌프** 중 아래 조건으로 선정한다.

#### **① 기어펌프(권장)**

- DC 24V 드라이브
- 유량: 2~6 L/min
- 최대 압력: 2~3 bar
- 특징:
  - 점도 높은 폐유에도 안정적
  - 소형화 가능
  - 맥동(Pulsation) 거의 없음
  - 필터 전후의 압력 변화 감지 용이

#### **② 다이어프램 펌프(조용함·저가형 선택지)**

- 유량: 3~5 L/min
- 최대 압력: 2 bar
- 특징:
  - 고형물 통과 능력이 비교적 우수
  - 유량 맥동 존재
  - 장시간 연속운전 적합

#### **펌프 배치**

- 기계 하부 중앙에 배치
   → 낮은 重心 유지
   → 양탱크, 필터와의 배관 길이 최소화

------

### **3) 배관부 (Piping System)**

#### **배관 재질**

- **내유성 실리콘, FEP/PTFE 튜브**
  - 고온(60~80°C)에서도 성능 유지
  - 기름 침투·팽윤 방지
- 연결부는 스테인리스 클램프 또는 금속 피팅

#### **배관 라인 구성**

1. **Intake Line (외부 → 기계 내부)**
2. **Transfer Line (1차 수거탱크 → 전처리 탱크)**
3. **Filter Bypass Line (필터 전/후단 차압 측정용)**
4. **Discharge Line (전처리 완료 폐유 → 외부 저장용기)**
5. **Tank Drain Line (청소/배수용)**

#### **배관 직경**

- 일반적으로 ID 8~12 mm
- 펌프에 의해 충분한 유량 확보 가능

------

### **4) 밸브 및 체크밸브 구성**

#### **전동 밸브(선택)**

- 라인 전환 자동화를 위해 2-way 또는 3-way 전동 밸브 사용 가능
   (청소 모드 ↔ 운전 모드 전환)

#### **수동 밸브**

- 유지보수 모드에서 사용
- 배수 시 작업자가 직접 개폐 가능

#### **체크밸브(필수)**

- 펌프 압력 변동 또는 라인 높이 차이로 인한 **역류 방지**
- Intake Line 및 Transfer Line에 각각 1개 설치

------

### **5) 필터링 인터페이스 (Pre-filter ↔ Main Filter)**

#### **Pre-filter**

- 펌프 흡입부와 전처리 탱크 사이에
   **100~200 μm 메쉬 필터** 삽입
- 고형물의 펌프 손상 방지

#### **Main Filter(전처리 탱크 내부)**

- 50~150 μm Stainless Mesh
- ΔP 센서로 필터 막힘 실시간 관찰
- 난류 유도 구조로 침전·분리 효율 증가

#### **필터 청소 모드 배관**

- Pump OUT → Drain → 외부 배출
- 찌꺼기 세척을 위한 라인 분리 가능(전동밸브 구성 시 자동화 가능)

------

### **6) 배출부 (Discharge System)**

#### **배출 방식**

- 펌프를 이용해 **전처리된 폐유를 외부 저장용기(20L 드럼 등)로 직접 이송**

#### **배출 포트**

- 1/2" Quick Connector 사용
   → 음식점 후면 등 협소한 공간에서 빠른 연결/해제 가능

#### **배출 제어**

- 조건 충족 시 자동 차단:
  - 외부 저장용기 만수
  - 전처리 탱크 저수
  - 도어 오픈
  - 펌프 과전류 등

------

### **7) 유지보수 용이성을 고려한 구조**

- 배관길이는 최소화 → 점도 증가 시 흐름저항 최소
- Fitting은 모두 측면 도어에서 접근 가능
- 중요한 배관(Pump IN/OUT)은 **Color-coded**로 구분
- 탱크 드레인 라인은 바닥 레벨에 배치해 완전 배수 가능
- 필터 구조는 **툴리스(Tool-less) 분리 세척** 가능

## 2.4 폐유 저장·운반 시스템 구조

본 장은 폐식용유(WCO)를 **안전하게 저장 → 보온 유지 → 운반·배출**하기 위한 내부 저장탱크 시스템과 외부 운반 인터페이스를 설명한다.
 냉장고 크기의 장비 특성상 **저중심, 누유 방지, 실내/주방 환경 적합성**을 핵심으로 설계했다.

구성 요소는 **1) 1차 수거탱크**, **2) 전처리·저장탱크**, **3) 열관리 구조**,
 **4) 안전 구조**, **5) 배출 시스템**, **6) 운반·취급 인터페이스**,
 **7) 청소·세척 구조**로 나뉜다.

------

### **1) 1차 수거탱크 (Primary Collection Tank)**

#### **역할**

- 외부에서 흡입한 폐유가 첫 번째로 모이는 공간
- 큰 고형물, 찌꺼기(튀김가루 등)가 비교적 많이 포함된 상태로 유입됨

#### **용량**

- **10~20 L**
   (장비 전체 무게·공간 균형 고려)

#### **재질**

- **SUS304 스테인리스** 권장
  - 내식성, 세척 용이성 우수
- 옵션: 고내열 HDPE (공정 온도가 낮을 경우)

#### **구조적 특징**

- 상부에는 **Intake Port**, **Vent Port**(필터 포함) 배치
- 하부에는 전처리 탱크와 연결되는 **Transfer Outlet** 존재
- 내부 벽면은 기름 잔류를 최소화하는 **곡면·부드러운 형상**

#### **찌꺼기 방지 구조**

- 내부에 **거친 스크린(1~2mm 메쉬)**
   → 펌프에 큰 고형물이 흡입되는 것을 방지

------

### **2) 전처리·저장탱크 (Pre-treatment & Main Storage Tank)**

#### **역할**

- 1차 수거 → 필터링 → 전처리 후
   **최종적으로 저장되는 메인 탱크**

#### **용량**

- **20~40 L** (전체 장비 적재 용량 목표 30~50 L에 맞춤)

#### **재질**

- SUS304 스테인리스 탱크(가열 가능)
- 내열 60~80°C 조건 설계

#### **내부 구성**

1. **Fine Filter Basket**(50~150 μm) — 분리형
2. **온도센서(PT100 / NTC)**
3. **열교환/가열 히터(옵션)**
4. **Low/High 레벨센서**

#### **탱크 상부 구조**

- Overfill 대비 배출·환기 포트
- 점검구(Inspection Door)
- Cleaning Spray Nozzle(세척 모드 용)

------

### **3) 열관리 구조 (Heating & Temperature Conditioning)**

#### **전처리 목적**

폐식용유의 점도를 낮추어 펌프 이송성을 확보하고,
 고형물을 분리하기 용이한 40–60°C 범위 유지.

#### **구성요소**

- 하부 열판 또는 **탱크 외벽 랩핑형 히터**
- 온도센서 기반 PID 제어
- **과열 방지용 Thermal Fuse (85~90°C)**
- 탱크 내부 **온도 균일화용 교반 구조(옵션)**

#### **보온 구조**

- 탱크 외벽에 내열 단열재(유리섬유 또는 실리콘폼) 적용
- 열손실 → 에너지낭비 방지

------

### **4) 안전 구조 (Leak, Vent, Pressure Safety)**

#### **누유 방지**

- 용접부 double-pass 처리
- 바닥에는 **2차 containment tray(누유받침)** 설치
   → 탱크 손상 시 외부 바닥 오염 방지

#### **압력·증기 배출**

- 상부 Vent Port에 **오일용 체크필터**
- 가열 시 생기는 열팽창/수분증기 안전 배출

#### **도어 인터락**

- 도어 열림 시:
  - 펌프 OFF
  - 히터 OFF
  - 배출라인 차단

------

### **5) 배출 시스템 (Discharge Unit)**

#### **배출 방식**

- 펌프를 이용한 **압송형 배출**
   또는
- 탱크 하부중력 배출(서비스 모드)

#### **배출구(Discharge Port)**

- 후면 또는 측면에 **1/2” 혹은 3/8” Quick Coupler**
  - 음식점 후문 등 협소 공간에서 빠른 연결 가능

#### **배출 제어**

- 조건 기반 차단:
  - 외부 용기 만수
  - 내부 탱크 저수
  - 전처리 온도 미달
  - 도어 오픈
  - Over-current/Over-pressure

#### **배출 호스**

- 내유성 실리콘/테프론 튜브
- 내경 8~12mm · 길이 1m 내외

------

### **6) 운반·취급 인터페이스 (Handling & Mobility Features)**

#### **이동 시 흔들림 방지**

- 탱크 상부 크로스바 고정
- 롤링 방지형 중앙 지지대

#### **외부 취급 포인트**

- 후면에 **핸들 그립**
- 하부에 **내장형 캐스터**
  - 전면 회전 2개
  - 후면 고정 2개
  - 모두 주차 브레이크 가능

#### **무게 분산**

- 메인 탱크를 가장 아래 배치하여
   **무게 중심을 극단적으로 낮게 유지**

------

### **7) 세척·배수 구조 (Cleaning & Drain System)**

#### **탱크 내부 세척 편의성**

- 상부 점검구 개방 → 손이 들어갈 크기
- 메쉬 필터는 Tool-less 클립형으로 분리 가능

#### **배수 라인**

- 하부 바닥 탈거형 Drain Port
- 세척 모드에서:
  - Pump OUT → Drain Line → 바깥 배출
     (배관 전환은 수동 또는 전동밸브로 가능)

#### **잔유 제거 구조**

- 탱크 내부 바닥은 **중앙/측면 경사 설계**
   → 완전 배수 가능
- Corner dead-space 최소화

## 2.5 양측 컨베이어 통합 구조

### **2.5.1 양측 컨베이어 장착 개념**

- 좌/우 양측에 독립 모듈 방식의 컨베이어 장착
- 본체 중앙(수거 탱크 상부)로 폐유를 모아주는 **Y자 형태 합류 구조**
- 컨베이어 높이는 바닥면에 근접하여 기름 흡입/스크레이핑 가능
- 유지보수 편의를 위한 **퀵커넥터 볼트 및 슬라이드 레일 탈착 구조**

### **2.5.2 컨베이어 종류 및 선택 기준**

- **벨트 타입**: 고무/우레탄 방유 코팅, 저점도·중점도 폐유 운반 적합
- **스크레이퍼 타입**: 부유물·찌꺼기 포함된 점성 폐유 운반에 적합
- **메쉬 타입**: 초저점도 폐유, 드레인 위주 작업 시 유리
- 선택 요소
  - 내유성 재질 여부
  - 청소 용이성
  - 모터 부하 대비 효율
  - 폭 150~200mm, 길이 500~700mm 기준(냉장고 크기 제한)

### **2.5.3 양측 컨베이어 고정 구조 설계**

- 본체 양측면에 **강철 보강 리브 프레임** 배치
- 모듈 결합을 위한
  - 상단 힌지 또는 L-브래킷
  - 하단 높이 조절 나사식 풋
- 충격 방지용 **고무댐퍼 패드** 삽입
- 현장 기름바닥에서의 안정적 수평 유지 지원

### **2.5.4 컨베이어 → 수거 장치 연결 구조**

- 양측에서 올라온 폐유를 하나의 **센터 수거구(트레이)**로 합류
- 트레이 내부에
  - 유도 경사(5~15°)
  - 상단 드레인 홀
  - 걸러짐용 1차 필터 그리드(찌꺼기 차단)
- 센터 수거구 하단에서 **펌프 흡입구로 직접 연결**

### **2.5.5 컨베이어 구동 모터 배치**

- 소형 DC 기어드 모터(12V 또는 24V) 좌우 각각 1개
- 모터 토크 기준
  - 10–20 kgf·cm (중점도 폐유 기준)
- 모터 방유(耐油) 및 방수(IP65 등급) 하우징 사용
- 좌우 속도는 MCU에서 개별 제어하여 **기름 흐름량 균형** 유지

### **2.5.6 양측 컨베이어의 높이·각도 조절 구조**

- 바닥 기름층 두께 변화 대응
- 옵션 1: 슬라이딩 가이드 레일 + 레버식 높이 조절
- 옵션 2: 나사식 높이 조절 조인트
- 각도 조절 범위: 0°(수평) ~ 20°(약간 상승)
- 기름 표면 위로 뜨지 않도록 끝단은 약간 downward 설계

### **2.5.7 안전 구조 및 보호 장치**

- 손 끼임 방지 커버(메쉬 또는 투명 PC)
- 컨베이어 양끝의 **비상 정지 버튼(E-stop)**
- 과부하 시 자동 모터 정지
- 외부 충격 대비 사이드 프레임 보강

### **2.5.8 분해·세척·정비 구조**

- 무도구(tool-less) 탈착 가능한 상단 커버
- 컨베이어 벨트 분리 후 개별 세척 가능
- 폐유 오염 방지용 오일 배출구 마련
- 현장 세척 프로세스
  - 1차 긁어내기
  - 온수/세척액 분사
  - 건조 후 재장착

### **2.5.9 폐유 특성에 따른 컨베이어 설계 고려사항**

- 점도가 높은 폐유
  - 스크레이퍼 타입 유리
  - 모터 토크 증가 필요
- 고형물 많을 때
  - 벨트 폭 확대
  - 1차 필터 그리드 강화
- 저온 환경
  - 벨트 접착면 경화 방지
  - 히터 라인 삽입 옵션(10–15W 수준)

### **2.5.10 좌우 컨베이어 동기 제어 로직(요약)**

- MCU가 두 모터의 RPM을 측정
- 유입량 균형을 위해 좌/우 속도 자동 조정
- 컨베이어 정지 시 자동 펌프 pause
- 과부하 발생 시 상태 LED로 경고

## 2.6 제어 시스템·펌웨어 아키텍처

### **2.6.1 제어 시스템 전체 구조 개요**

- 메인 MCU 기반의 중앙 제어 아키텍처
- 좌/우 컨베이어 모터, 폐유 펌프, 센서, UI, 무선 통신 등 통합 제어
- 실시간 동작 제어(RT loop) + 비실시간 관리(Task loop) 이원 구조
- 하드웨어 계층(HAL)–서비스 계층–애플리케이션 계층의 3계층 모델 적용

------

### **2.6.2 MCU 사양 및 선택 기준**

- 권장 MCU: STM32F4/F3/F103(실장 공간 제약 고려)
- 최소 사양
  - Clock ≥ 72 MHz
  - PWM 채널 ≥ 4
  - ADC 채널 ≥ 6
  - I²C/SPI/UART 통신 인터페이스
- 저전력 요구, 온도 보정 필요 여부
- 산업용 등급(−20~70°C) 권장

------

### **2.6.3 펌웨어 주요 모듈 간 구조**

- **Motor Control Module**
  - 좌우 컨베이어 개별 PWM 제어
  - 전류 피드백 기반 과부하 감지
- **Pump Control Module**
  - 폐유수거 펌프 On/Off, 유량 기반 PID 제어(옵션)
- **Sensor Manager**
  - 온도센서(유온), 유량센서, 전류 센서, 오일 높이 레벨 센서
- **Safety Manager**
  - 긴급정지(E-Stop) 처리
  - 누유 감지 시 시스템 전원 차단
- **Comms Module**
  - UART(정비용), BLE 또는 Wi-Fi(옵션)
- **Display & UI Module**
  - OLED/LCD 및 LED 경고 시스템
- **Data Logger**
  - 누적 운영시간, 수거량 기록
- **System Scheduler**
  - RT loop: 1ms/10ms 주기
  - Non-RT loop: 100ms~1s 주기

------

### **2.6.4 모터 제어 로직(PWM, 속도 피드백)**

- DC 기어모터 PWM Duty 제어(0–100%)
- 홀센서 없는 경우 전류 기반 간접 부하 추정
- 좌/우 속도 자동 동기화 알고리즘
  - 좌/우 유입량 불균형 검출 시 RPM 보정
- 벨트 걸림 시
  - 전류 급증 감지 → 즉시 정지 + 알람
- 필요 시 소프트스타트(Soft-start) 적용

------

### **2.6.5 펌프 제어 알고리즘**

- 기본 동작: 컨베이어 가동 시 펌프 자동 ON
- 오일 유입량 부족 시(Coil-overflow 방지)
  - 펌프 RPM 다운/일시 정지
- 폐유 점도 증가(저온 상태) 시
  - 펌프 PWM 상승 보정
- 유량 센서 기반 펌프 출력 PID 제어(선택 기능)

------

### **2.6.6 센서 시스템 구성**

- **온도센서(NTC/DS18B20)**: 폐유 점도 예측
- **유량센서(홀효과)**: 수거량 실시간 계산
- **오일 레벨 센서(초음파/플로트)**: 탱크 만재 감지
- **전류 센서(ACS712 계열)**: 모터/펌프 부하 감시
- **기울기 센서(선택)**: 경사면 사용 안정성
- **누유 감지 센서(컨덕티브 타입)**: 기기 내부 누유 감지

------

### **2.6.7 시스템 UI/인터페이스 설계**

- **전면부 간단 UI 구성**
  - 전원 버튼
  - START/STOP 버튼
  - 경고 LED(누유, 과부하, 만재 등)
- **고급형 옵션**
  - 0.96~1.3" OLED 표시: 온도, 수거량, 모터 부하, 만재 상태
  - BLE 연동하여 모바일 모니터링(로그, 알람)

------

### **2.6.8 Safety 펌웨어(안전 로직)**

- 긴급정지(E-Stop) 입력 시
  - 모든 PWM 즉시 OFF
- 모터/펌프 전류가 임계치 이상 200ms 초과 시
  - 자동정지 + 에러코드 표시
- 탱크 만재 상태
  - 펌프 OFF + 컨베이어 감속/정지
- 센서 오류 감지(값 불가, 논리오류)
  - Fault-safe 모드 진입
- 내부 누유 검출 시
  - 시스템 전원 Relay 차단

------

### **2.6.9 전원 관리·배터리 모듈 제어**

- 12V/24V 배터리 팩 모니터링
  - 전압, 온도, 잔량 계산
- 부하 분배 방식
  - 모터 우선 전원 공급
  - 펌프·UI 전원은 저부하 시 전환
- 충전 제어(CV/CC 방식)
- 저전압 보호(LVP)
  - 일정 전압 이하 → 시스템 자동 종료

------

### **2.6.10 통신 인터페이스 구조**

- **UART1**: 정비 모드용 PC 연결
- **I²C**: OLED, 온도센서, 레벨센서
- **SPI**: SD카드 데이터 로그(옵션)
- **BLE/Wi-Fi 모듈**:
  - 상태 모니터링
  - 수거량 데이터 전송
  - 유지보수 정비 정보 조회

------

### **2.6.11 펌웨어 Task 스케줄 구조(예시)**

- **1ms 주기**: 모터 전류 샘플링
- **10ms 주기**: 센서 필터링, PWM 업데이트
- **100ms 주기**: UI 업데이트, 부하분석
- **1s 주기**: 데이터로그 저장, BLE 상태 전달
- **이벤트 기반 Task**
  - E-stop
  - 만재 감지
  - 누유 검출
  - 온도 급변 감지

------

### **2.6.12 오류·알람 구조**

- Fault Code 정의
  - E01: 좌측 모터 과부하
  - E02: 우측 모터 과부하
  - E03: 펌프 과부하
  - E04: 탱크 만재
  - E05: 온도센서 오류
  - E06: 누유 감지
- 상태 LED 점멸 패턴 또는 디스플레이 표기
- 오류 발생 시 로그 기록 + 모터/펌프 세이프 스탑

------

### **2.6.13 펌웨어 업데이트(OTA/유선) 구조**

- UART Bootloader 통한 펌웨어 업데이트
- BLE OTA 업데이트(옵션)
- 듀얼-이미지 구조(안정성 확보)
- 업데이트 중 전원 차단 대비 롤백 로직

------

### **2.6.14 테스트·디버깅 구조**

- UART 로그 출력(상태, 센서 값, Fault)
- HAL 디버그 포인트 삽입
- 시뮬레이션 모드(센서Mock)
- 모터·펌프 개별 테스트 모드
- 부하 프로파일 자동 생성 기능(개발모드)

## 2.7 유지보수·세척 접근성 고려

### **2.7.1 유지보수 설계 철학 및 기본 원칙**

- **무도구(tool-less)** 접근성 최대화
- 핵심 모듈은 **5분 이내 분리·세척·재조립 가능**
- 폐유가 닿는 모든 부위는
  - 내유성 재질(스테인리스, PP, PE, 고무코팅)
  - 모서리 라운드 처리(찌꺼기 끼임 방지)
- 내부 동력·전기부는 완전 방유(耐油) 구조로 세척 영향 없음

------

### **2.7.2 외장 커버 및 주요 패널의 탈착 구조**

- 전면/측면 패널
  - 퀵릴리즈 락 구조
  - 나사 없이 손으로 열고 닫을 수 있는 힌지형 설계
- 상단 유지보수 패널
  - 오일 탱크·펌프·메인 배관 접근용
- 커버 내부 방유 실링(EPDM/실리콘) 적용
- 청소 시 오일 외부 누출 방지 홈(Drain groove) 설계

------

### **2.7.3 컨베이어 및 주변부 세척 접근성**

- 좌/우 컨베이어 모듈은 레일식 슬라이딩으로 **한쪽 방향으로 완전 탈거 가능**
- 벨트(또는 스크레이퍼) 빠른 분리 기능
- 컨베이어 하부 오일 고임 방지 구조
- 컨베이어 주변부 세척 프로세스 최적화:
  1. 슬라이드 분리
  2. 상단 커버 오픈
  3. 빠른 스크레이핑
  4. 온수 고압세척
  5. 재장착

------

### **2.7.4 펌프·배관 모듈 유지보수 접근성**

- 펌프는 하단 중앙부에 위치하고 **앞쪽 또는 뒤쪽에서 30초 내 탈착 가능**
- 배관 연결부는 **카플러(quick connector)** 방식
- 배관 내부 고형물 제거를 위한 플러싱 포트 제공
- 역류 젯 세척을 위한 청소 모드 제공
- 펌프 필터는 당겨서 빼는 방식(Pull-out cartridge)

------

### **2.7.5 오일 탱크 유지보수 및 세척 구조**

- 탱크 상단 개방형 리프트업 구조
- 내부 라운드 처리(코너 각 없음 → 청소 용이)
- 바닥면 1°~3° 경사로 침전물 한쪽으로 모이게 설계
- 바닥 드레인 밸브 + 세척용 2차 밸브
- 내벽 코팅(PE/불소계)으로 기름 고착 최소화
- 레벨 센서 탈착세척 가능

------

### **2.7.6 내부 드레인 시스템 설계**

- 세척 후 잔여 세척수·폐유가 자동으로 흘러가는 내부 드레인 라인
- 외부 바닥으로 흘러내리지 않도록 **내장형 폐유 회수 포트** 제공
- 드레인 배출구 필터(부유물 차단망) 설치
- 드레인 배출 방향은 한쪽으로 통일해 현장 세척성 강화

------

### **2.7.7 전기·전자부 세척 안전성 확보**

- 센서/MCU/모터 드라이브는 **밀폐형 전기함(IP65~67)**에 배치
- 외부 세척 시 전기함에 물/폐유가 닿지 않도록 분리 배치
- 방수 케이블 글랜드 사용
- 세척 중에도 고장 나지 않는 구조
  - PCB conformal coating
  - 커넥터 실링
  - 오일 차단 유닛 배리어

------

### **2.7.8 필터 및 소모품 교체 접근성**

- 1차 그리드 필터:
  - 상단에서 손으로 바로 분리
  - 세척 후 재장착
- 2차 미세 필터(선택):
  - 카트리지 방식
  - “삽입–회전–고정” 형태
- 배관 필터:
  - 하단 포트에서 손쉽게 제거
- 모든 소모품의 교체 시간 목표: **3분 이내**

------

### **2.7.9 세척 모드 자동화 기능(펌웨어 연계)**

- **Flush Mode**
  - 배관 내부 고형물 제거
  - 펌프 역회전 또는 간헐 펌핑
- **Heat Assist Mode**
  - 탱크 내부 히터(10–30W)로 기름 묻은 벽면 연화
- **Dry Mode**
  - 단시간 고속 공회전 후 자동 Drain
- 세척 시간 기록 및 유지보수 이력 자동 저장

------

### **2.7.10 현장 작업자 안전·편의성 설계**

- 모든 날카로운 모서리 제거
- 오일이 손에 묻지 않도록
  - 전용 손잡이
  - 배관 연결부 절연 그립 제공
- 바퀴는 오일바닥에서도 미끄러지지 않는 논슬립 커버 적용
- 냄새 차단을 위한 **탱크 상부 개스킷 완전 밀폐 구조**

------

### **2.7.11 유지보수 프로세스 표준화**

- 일일 점검 체크리스트
  - 컨베이어 상태
  - 펌프 필터
  - 드레인 라인 막힘 여부
- 주간 점검
  - 탱크 세척
  - 센서 청결
  - 배관 플러싱
- 월간 점검
  - 모터 브러시 마모
  - 힌지·가이드 레일 윤활
- 유지보수 매뉴얼 QR 코드 제공

------

### **2.7.12 예비부품 관리 및 교환체계**

- 예비 벨트/스크레이퍼
- 예비 펌프 카트리지
- 예비 배관 O-ring 및 실링
- 예비 센서 모듈(온도·전류·레벨)
- 예비 컨베이어 모터
- 현장 교체 절차를 10분 이내로 제한하는 모듈화 구조